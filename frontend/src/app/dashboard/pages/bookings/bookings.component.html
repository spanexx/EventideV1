<div class="bookings-container">
  <div class="page-header">
    <h1 class="page-title">Bookings Management</h1>
    <p class="page-description">View and manage all your appointments</p>
  </div>
  
  <div class="bookings-header">
    <h2>Recent Bookings</h2>
    <button class="refresh-btn" (click)="refreshBookings()">
      <i class="material-icons">refresh</i>
      Refresh
    </button>
  </div>
  
  <div *ngIf="loading$ | async" class="loading">
    Loading bookings...
  </div>
  
  <div *ngIf="!(loading$ | async) && (bookings$ | async)?.length === 0" class="no-bookings">
    <p>No bookings found.</p>
  </div>
  
  <div *ngIf="!(loading$ | async) && (bookings$ | async) && (bookings$ | async)!.length > 0" class="bookings-list">
    <div class="booking-filters">
      <mat-form-field>
        <mat-label>Filter by status</mat-label>
        <mat-select [(value)]="selectedStatus" (selectionChange)="filterBookings()">
          <mat-option value="">All</mat-option>
          <mat-option value="confirmed">Confirmed</mat-option>
          <mat-option value="pending">Pending</mat-option>
          <mat-option value="cancelled">Cancelled</mat-option>
          <mat-option value="completed">Completed</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    
    <mat-accordion class="iphone-card">
      <mat-expansion-panel *ngFor="let booking of bookings$ | async">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <div class="booking-summary">
              <div class="booking-time">
                {{ booking.startTime | date:'short' }}
              </div>
              <div class="booking-customer">
                {{ booking.customerName }}
              </div>
              <div class="booking-service">
                {{ booking.service }} ({{ booking.duration }} min)
              </div>
            </div>
          </mat-panel-title>
          <mat-panel-description>
            <span class="booking-status" [class]="'status-' + booking.status">
              {{ booking.status }}
            </span>
          </mat-panel-description>
        </mat-expansion-panel-header>
        
        <div class="booking-details">
          <div class="detail-row">
            <span class="detail-label">Customer Email:</span>
            <span class="detail-value">{{ booking.customerEmail }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Service:</span>
            <span class="detail-value">{{ booking.service }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Duration:</span>
            <span class="detail-value">{{ booking.duration }} minutes</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Start Time:</span>
            <span class="detail-value">{{ booking.startTime | date:'full' }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">End Time:</span>
            <span class="detail-value">{{ booking.endTime | date:'full' }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Status:</span>
            <span class="detail-value">
              <span class="booking-status" [class]="'status-' + booking.status">
                {{ booking.status }}
              </span>
            </span>
          </div>
        </div>
        
        <div class="booking-actions">
          <button mat-button color="primary" (click)="editBooking(booking)">
            <i class="material-icons">edit</i>
            Edit
          </button>
          <button 
            mat-button 
            color="warn" 
            (click)="cancelBooking(booking)" 
            [disabled]="booking.status === 'cancelled' || booking.status === 'completed'">
            <i class="material-icons">cancel</i>
            Cancel
          </button>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>