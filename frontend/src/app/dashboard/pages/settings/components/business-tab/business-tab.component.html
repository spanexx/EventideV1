<div class="card">
  <div class="card-content">
    <form class="settings-form">
      <mat-form-field appearance="outline">
        <mat-label>Business Name</mat-label>
        <input
          matInput
          [(ngModel)]="businessService.businessNameModel"
          name="businessName"
          placeholder="Enter your business name"
        />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Bio</mat-label>
        <textarea
          matInput
          [(ngModel)]="businessService.bioModel"
          name="bio"
          rows="4"
          placeholder="Tell us about your business"
        ></textarea>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Contact Phone</mat-label>
        <input
          matInput
          [(ngModel)]="businessService.contactPhoneModel"
          name="contactPhone"
          placeholder="+1 (555) 123-4567"
        />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Services Offered</mat-label>
        <mat-chip-grid #serviceChipGrid>
          @for (service of servicesArray(); track service) {
            <mat-chip-row (removed)="removeService(service)">
              {{ service }}
              <button matChipRemove>
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip-row>
          }
          <input
            placeholder="Add service..."
            [matChipInputFor]="serviceChipGrid"
            [matChipInputSeparatorKeyCodes]="chipsService.separatorKeysCodes"
            (matChipInputTokenEnd)="addService($event)"
            [matAutocomplete]="serviceAuto"
          />
        </mat-chip-grid>
        <mat-autocomplete #serviceAuto="matAutocomplete" (optionSelected)="onServiceSelected($event)">
          @for (service of commonServices; track service) {
            <mat-option [value]="service">{{ service }}</mat-option>
          }
        </mat-autocomplete>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Categories</mat-label>
        <mat-chip-grid #categoryChipGrid>
          @for (category of categoriesArray(); track category) {
            <mat-chip-row (removed)="removeCategory(category)">
              {{ category }}
              <button matChipRemove>
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip-row>
          }
          <input
            placeholder="Add category..."
            [matChipInputFor]="categoryChipGrid"
            [matChipInputSeparatorKeyCodes]="chipsService.separatorKeysCodes"
            (matChipInputTokenEnd)="addCategory($event)"
            [matAutocomplete]="categoryAuto"
          />
        </mat-chip-grid>
        <mat-autocomplete #categoryAuto="matAutocomplete" (optionSelected)="onCategorySelected($event)">
          @for (category of industryCategories; track category) {
            <mat-option [value]="category">{{ category }}</mat-option>
          }
        </mat-autocomplete>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Available Durations (minutes)</mat-label>
        <mat-chip-grid #durationChipGrid>
          @for (duration of durationsArray(); track duration) {
            <mat-chip-row (removed)="removeDuration(duration)">
              {{ duration }} min
              <button matChipRemove>
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip-row>
          }
          <input
            placeholder="Add duration..."
            [matChipInputFor]="durationChipGrid"
            [matChipInputSeparatorKeyCodes]="chipsService.separatorKeysCodes"
            (matChipInputTokenEnd)="addDuration($event)"
            [matAutocomplete]="durationAuto"
          />
        </mat-chip-grid>
        <mat-autocomplete #durationAuto="matAutocomplete" (optionSelected)="onDurationSelected($event)">
          @for (duration of commonDurations; track duration) {
            <mat-option [value]="duration">{{ duration }} minutes</mat-option>
          }
        </mat-autocomplete>
      </mat-form-field>

      <div class="location-section">
        <h3>Location</h3>
        <mat-form-field appearance="outline">
          <mat-label>Country</mat-label>
          <input
            matInput
            [(ngModel)]="businessService.locationCountryModel"
            name="locationCountry"
            placeholder="Country"
          />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>City</mat-label>
          <input
            matInput
            [(ngModel)]="businessService.locationCityModel"
            name="locationCity"
            placeholder="City"
          />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Address</mat-label>
          <input
            matInput
            [(ngModel)]="businessService.locationAddressModel"
            name="locationAddress"
            placeholder="Street address"
          />
        </mat-form-field>
      </div>

      <div class="form-actions">
        <button
          mat-flat-button
          color="primary"
          type="button"
          (click)="businessService.saveBusinessSettings()"
          [disabled]="(businessService.savingBusinessSettings | async) ?? false"
        >
          {{ (businessService.savingBusinessSettings | async) ? 'Saving...' : 'Save Business Settings' }}
        </button>
      </div>
    </form>
  </div>
</div>
